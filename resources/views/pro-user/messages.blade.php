<x-frontend.layout>
    <div class="foorbis-penal scrollbar">
        <div class="foorbis-penal-all scrollbar">
            <div class="top-bar row">

                <div class="col-xl-4 col-sm-12">
                    <div class="messages mt-0 chet-user-panal">
                        <div class="col-12">
                            <span class="totle-messages">10 message </span>
                            <div class="messages-searchbox">
                                <img class="searchImg" src="{{ asset('images/search.png') }}" alt="">
                                <input type="text" placeholder="Recherche " class="searchField">
                            </div>
                            <hr>
                        </div>
                        <div class="all-msg-fix scrollbar">

                            <div class=" singal-message unread-msg ">
                                <div class="innner-singal">
                                    <div class="msg-profile-img online">
                                        <img class="online-img" src="{{ asset('images/profile-pink.png') }}">
                                    </div>
                                    <div class="meg-info">
                                        <div class="row msg-description">
                                            <div class="messager-name">Entreprise</p>
                                            </div>
                                            <div class="message-time">30 min</p>
                                            </div>
                                            <div class="close-message"><a class="message-close" href="#"><img
                                                        src="{{ asset('images/close.png') }}"></a>
                                            </div>
                                            <div class="col-12">
                                                <p class="messages-topic">Lorem ipsum dolor sit amet, consectetur
                                                    adipiscing Donec tempor
                                                    massa vitae egestas porttitor.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class=" singal-message unread-msg">
                                <div class="innner-singal">
                                    <div class="msg-profile-img online">
                                        <img class="online-img" src="{{ asset('images/y-profile.png') }}">
                                    </div>
                                    <div class="meg-info">
                                        <div class="row msg-description">
                                            <div class="messager-name">Entreprise</p>
                                            </div>
                                            <div class="message-time">30 min</p>
                                            </div>
                                            <div class="close-message"><a class="message-close" href="#"><img
                                                        src="{{ asset('images/close.png') }}"></a>
                                            </div>
                                            <div class="col-12">
                                                <p class="messages-topic">Lorem ipsum dolor sit amet, consectetur
                                                    adipiscing Donec tempor
                                                    massa vitae egestas porttitor.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class=" singal-message reeded-msg">
                                <div class="innner-singal">
                                    <div class="msg-profile-img online">
                                        <img class="online-img" src="{{ asset('images/g-profile.png') }}">
                                    </div>
                                    <div class="meg-info">
                                        <div class="row msg-description">
                                            <div class="messager-name">Entreprise</p>
                                            </div>
                                            <div class="message-time">30 min</p>
                                            </div>
                                            <div class=" close-message"><a class="message-close" href="#"><img
                                                        src="{{ asset('images/close.png') }}"></a>
                                            </div>
                                            <div class="col-12">
                                                <p class="messages-topic">Lorem ipsum dolor sit amet, consectetur
                                                    adipiscing Donec tempor
                                                    massa vitae egestas porttitor.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class=" singal-message reeded-msg">
                                <div class="innner-singal">
                                    <div class="msg-profile-img online">
                                        <img class="online-img" src="{{ asset('images/g-profile.png') }}">
                                    </div>
                                    <div class="meg-info">
                                        <div class="row msg-description">
                                            <div class="messager-name">Entreprise</p>
                                            </div>
                                            <div class="message-time">30 min</p>
                                            </div>
                                            <div class="close-message"><a class="message-close" href="#"><img
                                                        src="{{ asset('images/close.png') }}"></a>
                                            </div>
                                            <div class="col-12">
                                                <p class="messages-topic">Lorem ipsum dolor sit amet, consectetur
                                                    adipiscing Donec tempor
                                                    massa vitae egestas porttitor.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class=" singal-message reeded-msg">
                                <div class="innner-singal">
                                    <div class="msg-profile-img online">
                                        <img class="online-img" src="{{ asset('images/g-profile.png') }}">
                                    </div>
                                    <div class="meg-info">
                                        <div class="row msg-description">
                                            <div class="messager-name">Entreprise</p>
                                            </div>
                                            <div class="message-time">30 min</p>
                                            </div>
                                            <div class="close-message"><a class="message-close" href="#"><img
                                                        src="{{ asset('images/close.png') }}"></a>
                                            </div>
                                            <div class="col-12">
                                                <p class="messages-topic">Lorem ipsum dolor sit amet, consectetur
                                                    adipiscing Donec tempor
                                                    massa vitae egestas porttitor.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-8 col-sm-12">
                    <div class="full-text-msg mt-0 chet-box">
                        <p class="w-100 mb-1" style="overflow: hidden;'">
                            <button class="bloquer-btn"><img src="{{ asset('images/bloquer.png') }}"
                                    class="mr-2">Envoyer</button>
                        </p>
                        <div class="col-12 chet-panal">
                            <div class="messages-searchbox">
                                <img class="searchImg" src="{{ asset('images/search.png') }}" alt="">
                                <input type="text" placeholder="Message " class="Message">
                            </div>
                        </div>
                        <div class="fix-height-text-msg scrollbar" id="chat_list">

                        </div>

                        <div class="sms-text-input">
                            <div class="col-12 p-0">
                                <hr style="width: 97%;margin-left: 0px;margin-bottom: 0px;">
                            </div>
                            <div class="row" style="padding: 0px 15px">
                                <div class="send-message-input">
                                    <input type="text" name="" placeholder="Message ...">
                                </div>
                                <div class="___class_+?101___">
                                    <button class="send-message-btn"><img
                                            src="{{ asset('images/send-message-icon.png') }}"
                                            class="mr-2">Envoyer</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    @push('scripts')
        <script type="text/javascript">
            var userType = "{{ auth()->user()->user_type }}"
            var user_id = "{{ auth()->user()->id }}"
            console.log(user_id)
            $('input').on('keydown', function() {
                // Echo.private(`chat`)
                // .whisper('typing', {
                //     name: 'pratibha'
                // });
                console.log($(this).val())
            })


            $(document).ready(function() {
                var page = '';
                var qstring = '';
                var basePath = baseUrl;
                var searchtext = '';

                getData(qstring);

                $(document).on('click', '.pagination li a', function(e) {
                    e.preventDefault();
                    page = $(this).attr('href').split('page=')[1];
                    getData();
                });

                $(document).on('keyup', '#search-box', function(e) {
                    e.preventDefault();
                    searchtext = $(this).val();
                    getData();
                });
                //importnat - get chat list
                function getData() {
                    var qstring = '&searchtext=' + searchtext + '&page=' + page;
                    $('#chat_list').html(
                        '<div class="text-center"><div class="kt-spinner d-inline-block kt-spinner--md kt-spinner--info"></div></div>'
                    );
                    $.ajax({
                        type: 'GET',
                        url: basePath + '/' + userType + '/chats?' + qstring,
                        dataType: 'json',
                    }).done(function(data) {
                        $('#chat_list').html(data.html);
                    }).fail(function() {
                        alert("Somthing went wrong.");
                    });
                }
            });
        </script>
    @endpush
</x-frontend.layout>
